<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>.completeApplePayRequest() -&gt; Promise · tipsi-stripe</title>
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content="Docusaurus" />
    <meta
      name="description"
      content="&lt;p&gt;&lt;strong&gt;Method is deprecated, use completeNativePayRequest() instead.&lt;/strong&gt;&lt;/p&gt;
"
    />
    <meta name="docsearch:language" content="en" />
    <meta
      property="og:title"
      content=".completeApplePayRequest() -&gt; Promise · tipsi-stripe"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tipsi.github.io/tipsi-stripe/index.html"
    />
    <meta
      property="og:description"
      content="&lt;p&gt;&lt;strong&gt;Method is deprecated, use completeNativePayRequest() instead.&lt;/strong&gt;&lt;/p&gt;
"
    />
    <meta name="twitter:card" content="summary" />
    <link rel="shortcut icon" href="/tipsi-stripe/img/favicon.png" />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"
    />
    <link
      rel="alternate"
      type="application/atom+xml"
      href="https://tipsi.github.io/tipsi-stripe/blog/atom.xml"
      title="tipsi-stripe Blog ATOM Feed"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      href="https://tipsi.github.io/tipsi-stripe/blog/feed.xml"
      title="tipsi-stripe Blog RSS Feed"
    />
    <script
      type="text/javascript"
      src="https://buttons.github.io/buttons.js"
    ></script>
    <script src="/tipsi-stripe/js/scrollSpy.js"></script>
    <link rel="stylesheet" href="/tipsi-stripe/css/main.css" />
    <script src="/tipsi-stripe/js/codetabs.js"></script>
  </head>
  <body class="sideNavVisible">
    <div class="fixedHeaderContainer">
      <div class="headerWrapper wrapper">
        <header>
          <a href="/tipsi-stripe/"
            ><img
              class="logo"
              src="/tipsi-stripe/img/favicon.png"
              alt="tipsi-stripe"
            />
            <h2 class="headerTitleWithLogo">tipsi-stripe</h2></a
          >
          <div class="navigationWrapper navigationSlider">
            <nav class="slidingNav">
              <ul class="nav-site nav-site-internal">
                <li class="siteNavGroupActive">
                  <a href="/tipsi-stripe/docs/index.html" target="_self"
                    >Docs</a
                  >
                </li>
                <li class="">
                  <a href="/tipsi-stripe/blog/" target="_self">Blog</a>
                </li>
              </ul>
            </nav>
          </div>
        </header>
      </div>
    </div>
    <div class="navPusher">
      <div class="docMainWrapper wrapper">
        <div class="container docsNavContainer" id="docsNav">
          <nav class="toc">
            <div class="toggleNav">
              <section class="navWrapper wrapper">
                <div class="navBreadcrumb wrapper">
                  <div class="navToggle" id="navToggler">
                    <div class="hamburger-menu">
                      <div class="line1"></div>
                      <div class="line2"></div>
                      <div class="line3"></div>
                    </div>
                  </div>
                  <h2><i>›</i><span> Pay</span></h2>
                </div>
                <div class="navGroups">
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Overview</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a class="navItem" href="/tipsi-stripe/docs/index.html"
                          >Start here</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/compatibility.html"
                          >Compatibility</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/installation.html"
                          >Installation</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/linking.html"
                          >Linking</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/running-apple-pay-on-a-real-device.html"
                          >Running  Pay on a real Device</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/google-pay.html"
                          >Google Pay</a
                        >
                      </li>
                      <li class="navListItem">
                        <a class="navItem" href="/tipsi-stripe/docs/usage.html"
                          >Usage</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/example.html"
                          >Example</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/changelog.html"
                          >Changelog</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Objects</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a class="navItem" href="/tipsi-stripe/docs/token.html"
                          >Token</a
                        >
                      </li>
                      <li class="navListItem">
                        <a class="navItem" href="/tipsi-stripe/docs/source.html"
                          >Source</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle"> Pay</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/openapplepaysetup.html"
                          >.openApplePaySetup()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/deviceSupportsApplePay.html"
                          >.deviceSupportsApplePay()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/canmakeapplepaypaymentsoptions.html"
                          >.canMakeApplePayPayments()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/paymentrequestwithapplepayitemsoptions.html"
                          >.paymentRequestWithApplePay()</a
                        >
                      </li>
                      <li class="navListItem navListItemActive">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/completeapplepayrequest.html"
                          >.completeApplePayRequest()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/cancelapplepayrequest.html"
                          >.cancelApplePayRequest()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">G Pay</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/devicesupportsandroidpay.html"
                          >.deviceSupportsAndroidPay()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/canmakeandroidpaypayments.html"
                          >.canMakeAndroidPayPayments()</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/paymentrequestwithandroidpay.html"
                          >.paymentRequestWithAndroidPay()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Card Form</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/paymentrequestwithcardform.html"
                          >.paymentRequestWithCardForm()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Card Params Object</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/createtokenwithcard.html"
                          >.createTokenWithCard()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">
                      Bank Account Params Object
                    </h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/createtokenwithbankaccount.html"
                          >.createTokenWithBankAccount()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">
                      Create Source Object With Params
                    </h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/createsourcewithparamsparams.html"
                          >.createSourceWithParams()</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Components</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/paymentcardtextfield.html"
                          >&lt;PaymentCardTextField /&gt;</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Error Codes</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/errorcodes.html"
                          >Error Codes</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Tests</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/tests-local-ci.html"
                          >Local CI</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/tests-manual.html"
                          >Manual</a
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="navGroup">
                    <h3 class="navGroupCategoryTitle">Troubleshooting</h3>
                    <ul class="">
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/troubleshooting-android.html"
                          >Android</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/troubleshooting-jest.html"
                          >Jest</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/troubleshooting-tests.html"
                          >Tests</a
                        >
                      </li>
                      <li class="navListItem">
                        <a
                          class="navItem"
                          href="/tipsi-stripe/docs/troubleshooting-useframeworks-issue.html"
                          >use_frameworks issue</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
              </section>
            </div>
            <script>
              var coll = document.getElementsByClassName("collapsible");
              var checkActiveCategory = true;
              for (var i = 0; i < coll.length; i++) {
                var links = coll[i].nextElementSibling.getElementsByTagName(
                  "*"
                );
                if (checkActiveCategory) {
                  for (var j = 0; j < links.length; j++) {
                    if (links[j].classList.contains("navListItemActive")) {
                      coll[i].nextElementSibling.classList.toggle("hide");
                      coll[i].childNodes[1].classList.toggle("rotate");
                      checkActiveCategory = false;
                      break;
                    }
                  }
                }

                coll[i].addEventListener("click", function() {
                  var arrow = this.childNodes[1];
                  arrow.classList.toggle("rotate");
                  var content = this.nextElementSibling;
                  content.classList.toggle("hide");
                });
              }

              document.addEventListener("DOMContentLoaded", function() {
                createToggler("#navToggler", "#docsNav", "docsSliderActive");
                createToggler("#tocToggler", "body", "tocActive");

                var headings = document.querySelector(".toc-headings");
                headings &&
                  headings.addEventListener(
                    "click",
                    function(event) {
                      var el = event.target;
                      while (el !== headings) {
                        if (el.tagName === "A") {
                          document.body.classList.remove("tocActive");
                          break;
                        } else {
                          el = el.parentNode;
                        }
                      }
                    },
                    false
                  );

                function createToggler(
                  togglerSelector,
                  targetSelector,
                  className
                ) {
                  var toggler = document.querySelector(togglerSelector);
                  var target = document.querySelector(targetSelector);

                  if (!toggler) {
                    return;
                  }

                  toggler.onclick = function(event) {
                    event.preventDefault();

                    target.classList.toggle(className);
                  };
                }
              });
            </script>
          </nav>
        </div>
        <div class="container mainContainer">
          <div class="wrapper">
            <div class="post">
              <header class="postHeader">
                <h1 class="postHeaderTitle">
                  .completeApplePayRequest() -&gt; Promise
                </h1>
              </header>
              <article>
                <div>
                  <span
                    ><p>
                      <strong
                        >Method is deprecated, use completeNativePayRequest()
                        instead.</strong
                      >
                    </p>
                    <p>
                      After <code>paymentRequestWithApplePay</code> you should
                      complete the operation by calling
                      <code>completeApplePayRequest</code> .
                    </p>
                    <pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> items = [{
  <span class="hljs-attr">label</span>: <span class="hljs-string">'Whisky'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-string">'50.00'</span>,
}, {
  <span class="hljs-attr">label</span>: <span class="hljs-string">'Tipsi, Inc'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-string">'50.00'</span>,
}]

<span class="hljs-keyword">const</span> shippingMethods = [{
  <span class="hljs-attr">id</span>: <span class="hljs-string">'fedex'</span>,
  <span class="hljs-attr">label</span>: <span class="hljs-string">'FedEX'</span>,
  <span class="hljs-attr">detail</span>: <span class="hljs-string">'Test @ 10'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-string">'10.00'</span>,
}]

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">requiredBillingAddressFields</span>: <span class="hljs-string">'all'</span>,
  <span class="hljs-attr">requiredShippingAddressFields</span>: <span class="hljs-string">'all'</span>,
  shippingMethods,
}

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> stripe.paymentRequestWithApplePay(items, options)

  <span class="hljs-comment">// Client specific code</span>
  <span class="hljs-comment">// api.sendTokenToBackend(token)</span>

  <span class="hljs-comment">// You should complete the operation by calling</span>
  stripe.completeApplePayRequest()
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// Or cancel if an error occurred</span>
  <span class="hljs-comment">// stripe.cancelApplePayRequest()</span>
}
</code></pre>
                  </span>
                </div>
              </article>
            </div>
            <div class="docs-prevnext">
              <a
                class="docs-prev button"
                href="/tipsi-stripe/docs/paymentrequestwithapplepayitemsoptions.html"
                ><span class="arrow-prev">← </span
                ><span class="function-name-prevnext"
                  >.paymentRequestWithApplePay()</span
                ></a
              ><a
                class="docs-next button"
                href="/tipsi-stripe/docs/cancelapplepayrequest.html"
                ><span class="function-name-prevnext"
                  >.cancelApplePayRequest()</span
                ><span class="arrow-next"> →</span></a
              >
            </div>
          </div>
        </div>
      </div>
      <footer class="nav-footer" id="footer">
        <section class="sitemap">
          <a href="/tipsi-stripe/" class="nav-home"></a>
          <div>
            <h5>Docs</h5>
            <a href="/tipsi-stripe/docs/en/index.html">Getting Started</a
            ><a
              href="/tipsi-stripe/docs/en/running-apple-pay-on-a-real-device.html"
              >Running on Device</a
            ><a href="/tipsi-stripe/docs/en/index.html">API Reference</a>
          </div>
          <div>
            <h5>More</h5>
            <a href="/tipsi-stripe/blog">Blog</a
            ><a href="https://github.com/">GitHub</a
            ><a
              data-show-count="true"
              class="github-button"
              href="https://github.com/tipsi/tipsi-stripe"
              data-icon="octicon-star"
              data-count-href="/tipsi/tipsi-stripe/stargazers"
              data-count-aria-label="# stargazers on GitHub"
              aria-label="Star this project on GitHub"
              >Star</a
            >
          </div>
        </section>
        <section class="copyright">Copyright © 2019 Tipsi.</section>
      </footer>
    </div>
  </body>
</html>
